[Unit]
Description=Proxy WireGuard traffic from TCP to UDP

[Service]
# capability to allow binding to ports < 1024
AmbientCapabilities=CAP_NET_BIND_SERVICE
Environment=LISTEN=[::]:51820
Environment=TO=127.0.0.1:51820
EnvironmentFile=-/etc/sysconfig/proxyguard-server
EnvironmentFile=-/etc/default/proxyguard-server
ExecStart=/usr/sbin/proxyguard-server -listen ${LISTEN} -to ${TO}
Restart=on-failure
PrivateDevices=yes
DynamicUser=yes

[Install]
WantedBy=multi-user.target
